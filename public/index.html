<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISCORD : fleetybossik12 <3 </title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg0:#05060f;--bg1:#0a0c1a;--bg2:#111328;--bg3:#191d3a;--bg4:#21264d;
            --accent:#7c3aed;--accent2:#a78bfa;--accent3:#c4b5fd;--accent-glow:rgba(124,58,237,0.3);
            --green:#10b981;--green2:#34d399;--green-d:rgba(16,185,129,0.1);--green-b:rgba(16,185,129,0.15);
            --red:#ef4444;--red2:#f87171;--red-d:rgba(239,68,68,0.1);--red-b:rgba(239,68,68,0.15);
            --yellow:#fbbf24;--yellow2:#fcd34d;--yellow-d:rgba(251,191,36,0.1);
            --blue:#3b82f6;--blue2:#60a5fa;--blue-d:rgba(59,130,246,0.1);
            --cyan:#06b6d4;--pink:#ec4899;--orange:#f97316;
            --t1:#f1f5f9;--t2:#94a3b8;--t3:#64748b;--t4:#475569;
            --brd:rgba(148,163,184,0.08);--brd2:rgba(148,163,184,0.15);
            --glass:rgba(10,12,26,0.7);--glass2:rgba(17,19,40,0.8);
            --radius:16px;--radius-sm:10px;--radius-xs:6px;
            --shadow:0 4px 30px rgba(0,0,0,0.3);--shadow-lg:0 10px 60px rgba(0,0,0,0.5);
            --transition:all .3s cubic-bezier(.4,0,.2,1);
            --sidebar-w:290px;
        }

        /* ====== THEMES ====== */
        [data-theme="midnight"]{
            --bg0:#020617;--bg1:#0f172a;--bg2:#1e293b;--bg3:#334155;--bg4:#475569;
            --accent:#6366f1;--accent2:#818cf8;--accent3:#a5b4fc;--accent-glow:rgba(99,102,241,0.3);
        }
        [data-theme="forest"]{
            --bg0:#022c22;--bg1:#064e3b;--bg2:#065f46;--bg3:#047857;--bg4:#059669;
            --accent:#10b981;--accent2:#34d399;--accent3:#6ee7b7;--accent-glow:rgba(16,185,129,0.3);
            --green:#a3e635;--green2:#bef264;
        }
        [data-theme="sunset"]{
            --bg0:#1c0a00;--bg1:#2d1600;--bg2:#431f00;--bg3:#5c2d00;--bg4:#7c3a00;
            --accent:#f97316;--accent2:#fb923c;--accent3:#fdba74;--accent-glow:rgba(249,115,22,0.3);
            --green:#22d3ee;--green2:#67e8f9;
        }
        [data-theme="sakura"]{
            --bg0:#1a0a14;--bg1:#2d1225;--bg2:#401a35;--bg3:#552347;--bg4:#6b2d5a;
            --accent:#ec4899;--accent2:#f472b6;--accent3:#f9a8d4;--accent-glow:rgba(236,72,153,0.3);
            --green:#a78bfa;--green2:#c4b5fd;
        }
        [data-theme="ocean"]{
            --bg0:#001220;--bg1:#001d35;--bg2:#00294d;--bg3:#003566;--bg4:#004080;
            --accent:#0ea5e9;--accent2:#38bdf8;--accent3:#7dd3fc;--accent-glow:rgba(14,165,233,0.3);
            --green:#2dd4bf;--green2:#5eead4;
        }
        [data-theme="light"]{
            --bg0:#f8fafc;--bg1:#f1f5f9;--bg2:#e2e8f0;--bg3:#cbd5e1;--bg4:#94a3b8;
            --accent:#7c3aed;--accent2:#6d28d9;--accent3:#5b21b6;--accent-glow:rgba(124,58,237,0.15);
            --t1:#0f172a;--t2:#334155;--t3:#64748b;--t4:#94a3b8;
            --brd:rgba(0,0,0,0.08);--brd2:rgba(0,0,0,0.15);
            --glass:rgba(241,245,249,0.9);--glass2:rgba(226,232,240,0.9);
            --green:#059669;--green2:#047857;--green-d:rgba(5,150,105,0.1);
            --red:#dc2626;--red2:#b91c1c;--red-d:rgba(220,38,38,0.1);
        }
        [data-theme="amoled"]{
            --bg0:#000000;--bg1:#0a0a0a;--bg2:#141414;--bg3:#1e1e1e;--bg4:#282828;
            --brd:rgba(255,255,255,0.05);--brd2:rgba(255,255,255,0.1);
            --glass:rgba(0,0,0,0.9);--glass2:rgba(10,10,10,0.9);
        }

        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Inter',-apple-system,sans-serif;background:var(--bg0);color:var(--t1);min-height:100vh;overflow-x:hidden;transition:background .5s,color .5s}

        /* ====== LOGIN SCREEN ====== */
        .login-overlay{
            position:fixed;inset:0;z-index:99999;
            background:var(--bg0);
            display:flex;align-items:center;justify-content:center;
            transition:opacity .6s,transform .6s;
        }
        .login-overlay.hidden{opacity:0;transform:scale(1.1);pointer-events:none}

        .login-bg{position:absolute;inset:0;overflow:hidden}
        .login-bg .orb{position:absolute;border-radius:50%;filter:blur(100px);opacity:.2;animation:orbFloat 15s ease-in-out infinite}
        .login-bg .orb:nth-child(1){width:500px;height:500px;background:var(--accent);top:-100px;left:-100px}
        .login-bg .orb:nth-child(2){width:400px;height:400px;background:var(--pink);bottom:-100px;right:-100px;animation-delay:-5s}
        .login-bg .orb:nth-child(3){width:300px;height:300px;background:var(--cyan);top:50%;left:50%;animation-delay:-10s}

        .login-particles{position:absolute;inset:0}
        .login-particle{
            position:absolute;width:3px;height:3px;background:var(--accent2);border-radius:50%;
            animation:loginFloat 6s ease-in-out infinite;opacity:0;
        }
        @keyframes loginFloat{
            0%,100%{opacity:0;transform:translateY(0) rotate(0deg)}
            50%{opacity:.7;transform:translateY(-60px) rotate(180deg)}
        }

        .login-card{
            position:relative;z-index:10;width:420px;max-width:90vw;
            background:var(--glass2);backdrop-filter:blur(40px) saturate(180%);
            border:1px solid var(--brd2);border-radius:24px;
            padding:48px 40px;text-align:center;
            animation:loginCardIn .8s cubic-bezier(.4,0,.2,1);
            box-shadow:0 25px 80px rgba(0,0,0,.5);
        }
        @keyframes loginCardIn{from{opacity:0;transform:translateY(40px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}

        .login-logo{
            width:80px;height:80px;margin:0 auto 24px;
            background:linear-gradient(135deg,var(--accent),var(--pink),var(--cyan));
            border-radius:22px;display:flex;align-items:center;justify-content:center;
            font-size:42px;box-shadow:0 8px 30px rgba(124,58,237,.4);
            animation:loginLogoFloat 3s ease-in-out infinite;
        }
        @keyframes loginLogoFloat{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-8px) rotate(2deg)}}

        .login-title{
            font-family:'Outfit',sans-serif;font-size:28px;font-weight:800;
            background:linear-gradient(135deg,var(--t1),var(--accent2));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            margin-bottom:6px;
        }
        .login-subtitle{color:var(--t3);font-size:13px;margin-bottom:32px}

        .login-input-group{position:relative;margin-bottom:20px}
        .login-input-icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:18px;z-index:2}
        .login-input{
            width:100%;padding:16px 16px 16px 48px;
            background:var(--bg2);border:2px solid var(--brd2);border-radius:14px;
            color:var(--t1);font-size:15px;font-family:'Inter',sans-serif;
            outline:none;transition:var(--transition);
        }
        .login-input:focus{border-color:var(--accent);box-shadow:0 0 0 4px var(--accent-glow)}
        .login-input::placeholder{color:var(--t4)}
        .login-input.error{border-color:var(--red);animation:loginShake .5s}
        @keyframes loginShake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}

        .login-error{color:var(--red);font-size:12px;font-weight:600;margin-top:8px;display:none;animation:fadeIn .3s}
        .login-error.show{display:block}

        .login-btn{
            width:100%;padding:16px;margin-top:8px;
            background:linear-gradient(135deg,var(--accent),var(--pink));
            border:none;border-radius:14px;color:#fff;font-size:16px;font-weight:700;
            font-family:'Outfit',sans-serif;cursor:pointer;transition:var(--transition);
            position:relative;overflow:hidden;
        }
        .login-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(124,58,237,.4)}
        .login-btn:active{transform:scale(.98)}
        .login-btn .btn-shine{
            position:absolute;top:0;left:-100%;width:100%;height:100%;
            background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);
            animation:btnShine 3s infinite;
        }
        @keyframes btnShine{0%{left:-100%}50%,100%{left:100%}}

        .login-footer{margin-top:28px;display:flex;align-items:center;justify-content:center;gap:8px;color:var(--t4);font-size:11px}
        .login-footer .lock{font-size:14px}

        .login-attempts{
            margin-top:12px;font-size:11px;color:var(--t4);
            font-family:'JetBrains Mono',monospace;
        }

        /* ====== BG EFFECTS ====== */
        .bg-effects{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
        .bg-orb{position:absolute;border-radius:50%;filter:blur(120px);opacity:.12;animation:orbFloat 20s ease-in-out infinite}
        .bg-orb:nth-child(1){width:600px;height:600px;background:var(--accent);top:-200px;left:-200px}
        .bg-orb:nth-child(2){width:500px;height:500px;background:var(--green);bottom:-200px;right:-100px;animation-delay:-7s}
        .bg-orb:nth-child(3){width:400px;height:400px;background:var(--blue);top:50%;left:50%;transform:translate(-50%,-50%);animation-delay:-14s}
        .bg-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(148,163,184,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(148,163,184,.03) 1px,transparent 1px);background-size:60px 60px;mask-image:radial-gradient(ellipse at center,black 30%,transparent 70%)}
        @keyframes orbFloat{0%,100%{transform:translate(0,0) scale(1)}25%{transform:translate(50px,-30px) scale(1.1)}50%{transform:translate(-20px,50px) scale(.95)}75%{transform:translate(30px,20px) scale(1.05)}}

        .particle{position:fixed;width:2px;height:2px;background:var(--accent2);border-radius:50%;pointer-events:none;z-index:0;opacity:0;animation:particleFade 4s ease-in-out infinite}
        @keyframes particleFade{0%,100%{opacity:0;transform:translateY(0)}50%{opacity:.5;transform:translateY(-30px)}}

        /* ====== APP WRAPPER ====== */
        .app{display:none;min-height:100vh}
        .app.visible{display:block;animation:appIn .6s ease}
        @keyframes appIn{from{opacity:0}to{opacity:1}}

        /* ====== HEADER ====== */
        .header{
            position:sticky;top:0;z-index:1000;
            background:var(--glass);backdrop-filter:blur(30px) saturate(180%);
            border-bottom:1px solid var(--brd);padding:0 28px;height:64px;
            display:flex;align-items:center;justify-content:space-between;
            transition:var(--transition);
        }
        .header.scrolled{box-shadow:0 4px 30px rgba(0,0,0,.4)}

        .header-left{display:flex;align-items:center;gap:16px}

        .menu-toggle{
            display:none;width:38px;height:38px;border-radius:var(--radius-sm);
            background:var(--bg2);border:1px solid var(--brd);color:var(--t2);
            font-size:18px;cursor:pointer;transition:var(--transition);
            align-items:center;justify-content:center;
        }
        .menu-toggle:hover{background:var(--bg3);color:var(--t1)}

        .logo{display:flex;align-items:center;gap:10px;cursor:pointer;transition:var(--transition)}
        .logo:hover{transform:scale(1.02)}
        .logo-icon{
            width:38px;height:38px;
            background:linear-gradient(135deg,var(--accent),var(--pink));
            border-radius:11px;display:flex;align-items:center;justify-content:center;
            font-size:20px;box-shadow:0 4px 15px rgba(124,58,237,.3);
            animation:logoGlow 3s ease-in-out infinite;
        }
        @keyframes logoGlow{0%,100%{box-shadow:0 4px 15px rgba(124,58,237,.3)}50%{box-shadow:0 4px 25px rgba(124,58,237,.5)}}
        .logo-text{font-family:'Outfit',sans-serif;font-size:20px;font-weight:800;background:linear-gradient(135deg,var(--t1),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-.5px}
        .logo-ver{font-size:8px;color:var(--t4);background:var(--bg3);padding:2px 7px;border-radius:4px;font-weight:700;letter-spacing:.5px}

        .status-badge{
            display:flex;align-items:center;gap:7px;padding:5px 14px;border-radius:30px;
            font-size:11px;font-weight:600;transition:var(--transition);border:1px solid transparent;
        }
        .status-badge.online{background:var(--green-d);color:var(--green2);border-color:var(--green-b)}
        .status-badge.offline{background:var(--red-d);color:var(--red2);border-color:var(--red-b)}
        .status-badge.connecting{background:var(--yellow-d);color:var(--yellow2);border-color:rgba(251,191,36,.15)}
        .status-dot{width:7px;height:7px;border-radius:50%}
        .status-badge.online .status-dot{background:var(--green);box-shadow:0 0 10px var(--green);animation:statusPulse 2s ease-in-out infinite}
        .status-badge.offline .status-dot{background:var(--red)}
        .status-badge.connecting .status-dot{background:var(--yellow);animation:statusPulse 1s ease-in-out infinite}
        @keyframes statusPulse{0%,100%{opacity:1}50%{opacity:.4}}

        .header-right{display:flex;align-items:center;gap:8px}
        .refresh-ind{display:flex;align-items:center;gap:6px;font-size:10px;color:var(--t4);font-family:'JetBrains Mono',monospace}
        .spinner{width:12px;height:12px;border:2px solid var(--brd2);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}

        .hdr-btn{
            width:36px;height:36px;border-radius:var(--radius-sm);background:var(--bg2);
            border:1px solid var(--brd);color:var(--t3);display:flex;align-items:center;
            justify-content:center;cursor:pointer;transition:var(--transition);font-size:15px;
            position:relative;
        }
        .hdr-btn:hover{background:var(--bg3);color:var(--t1);border-color:var(--brd2);transform:translateY(-1px)}
        .hdr-btn .notif-dot{
            position:absolute;top:5px;right:5px;width:6px;height:6px;
            border-radius:50%;background:var(--red);display:none;
        }
        .hdr-btn .notif-dot.show{display:block;animation:statusPulse 1s infinite}

        .hdr-btn-text{
            padding:6px 14px;border-radius:var(--radius-sm);background:var(--bg2);
            border:1px solid var(--brd);color:var(--t3);cursor:pointer;transition:var(--transition);
            font-size:11px;font-weight:600;font-family:'Inter',sans-serif;
            display:flex;align-items:center;gap:6px;white-space:nowrap;
        }
        .hdr-btn-text:hover{background:var(--bg3);color:var(--t1);border-color:var(--brd2)}
        .hdr-btn-text.active{background:var(--accent);border-color:var(--accent);color:#fff}

        /* ====== SIDEBAR NAV ====== */
        .sidebar-nav{
            position:fixed;left:0;top:64px;bottom:0;width:var(--sidebar-w);
            background:var(--bg1);border-right:1px solid var(--brd);
            display:flex;flex-direction:column;z-index:500;
            transition:transform .4s cubic-bezier(.4,0,.2,1),width .3s;
            overflow:hidden;
        }
        .sidebar-nav.collapsed{width:68px}
        .sidebar-nav.collapsed .nav-label,.sidebar-nav.collapsed .nav-section-title,.sidebar-nav.collapsed .nav-count,.sidebar-nav.collapsed .sidebar-footer-text{display:none}
        .sidebar-nav.collapsed .nav-item{justify-content:center;padding:10px}
        .sidebar-nav.collapsed .nav-icon{margin:0}

        .nav-section{padding:8px 12px}
        .nav-section-title{font-size:9px;font-weight:700;color:var(--t4);text-transform:uppercase;letter-spacing:1.5px;padding:12px 14px 6px;user-select:none}

        .nav-item{
            display:flex;align-items:center;gap:12px;padding:10px 14px;
            border-radius:var(--radius-sm);cursor:pointer;transition:var(--transition);
            margin-bottom:2px;border:1px solid transparent;color:var(--t2);
            font-size:13px;font-weight:500;position:relative;overflow:hidden;
        }
        .nav-item::before{
            content:'';position:absolute;left:0;top:0;bottom:0;width:3px;
            background:var(--accent);border-radius:0 3px 3px 0;
            transform:scaleY(0);transition:transform .2s;
        }
        .nav-item:hover{background:var(--bg3);color:var(--t1)}
        .nav-item.active{background:linear-gradient(135deg,rgba(124,58,237,.15),rgba(124,58,237,.05));color:var(--accent2);border-color:rgba(124,58,237,.1)}
        .nav-item.active::before{transform:scaleY(1)}
        .nav-icon{font-size:17px;width:22px;text-align:center;flex-shrink:0}
        .nav-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .nav-count{
            margin-left:auto;background:var(--bg3);padding:1px 8px;border-radius:10px;
            font-size:10px;font-weight:700;font-family:'JetBrains Mono',monospace;color:var(--t4);
            flex-shrink:0;
        }
        .nav-item.active .nav-count{background:var(--accent);color:#fff}

        .sidebar-footer{
            margin-top:auto;padding:16px;border-top:1px solid var(--brd);
        }
        .sidebar-collapse-btn{
            width:100%;padding:8px;border-radius:var(--radius-sm);background:var(--bg2);
            border:1px solid var(--brd);color:var(--t3);cursor:pointer;transition:var(--transition);
            font-size:12px;font-family:'Inter',sans-serif;display:flex;align-items:center;
            justify-content:center;gap:8px;
        }
        .sidebar-collapse-btn:hover{background:var(--bg3);color:var(--t1)}

        .sidebar-footer-user{
            display:flex;align-items:center;gap:10px;padding:10px;
            border-radius:var(--radius-sm);background:var(--bg2);margin-bottom:10px;
        }
        .sidebar-footer-avatar{width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--pink));display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}
        .sidebar-footer-text{flex:1;min-width:0}
        .sidebar-footer-name{font-size:12px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .sidebar-footer-role{font-size:10px;color:var(--t4)}

        /* ====== MAIN CONTENT ====== */
        .main-content{
            margin-left:var(--sidebar-w);min-height:calc(100vh - 64px);
            transition:margin-left .4s cubic-bezier(.4,0,.2,1);
            position:relative;z-index:1;
        }
        .sidebar-nav.collapsed ~ .main-content{margin-left:68px}

        /* ====== TAB CONTENT ====== */
        .tab-content{display:none;animation:tabIn .5s cubic-bezier(.4,0,.2,1)}
        .tab-content.active{display:block}
        @keyframes tabIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}

        /* ====== DASHBOARD ====== */
        .dashboard{padding:28px 32px;max-width:1400px}

        .dash-hero{
            background:linear-gradient(135deg,rgba(124,58,237,.15),rgba(236,72,153,.1),rgba(6,182,212,.1));
            border:1px solid var(--brd2);border-radius:20px;padding:36px 40px;
            margin-bottom:28px;position:relative;overflow:hidden;
        }
        .dash-hero::before{
            content:'';position:absolute;right:-40px;top:-40px;width:250px;height:250px;
            background:radial-gradient(circle,var(--accent-glow),transparent 70%);
        }
        .dash-hero h1{
            font-family:'Outfit',sans-serif;font-size:34px;font-weight:800;
            background:linear-gradient(135deg,var(--t1),var(--accent2));
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            margin-bottom:8px;position:relative;
        }
        .dash-hero p{color:var(--t3);font-size:14px;max-width:500px;line-height:1.6;position:relative}
        .dash-hero-time{
            position:absolute;right:40px;top:50%;transform:translateY(-50%);
            text-align:right;
        }
        .dash-hero-clock{font-family:'Space Grotesk',sans-serif;font-size:42px;font-weight:700;color:var(--accent2);line-height:1}
        .dash-hero-date{font-size:12px;color:var(--t3);margin-top:4px;font-family:'JetBrains Mono',monospace}

        .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-bottom:28px}
        .stat-card{
            background:var(--glass2);backdrop-filter:blur(20px);border:1px solid var(--brd);
            border-radius:var(--radius);padding:20px 22px;position:relative;overflow:hidden;
            transition:var(--transition);cursor:default;
        }
        .stat-card:hover{transform:translateY(-3px);border-color:var(--brd2);box-shadow:var(--shadow)}
        .stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:var(--radius) var(--radius) 0 0}
        .stat-card.purple::before{background:linear-gradient(90deg,var(--accent),var(--accent2))}
        .stat-card.green::before{background:linear-gradient(90deg,var(--green),var(--green2))}
        .stat-card.red::before{background:linear-gradient(90deg,var(--red),var(--red2))}
        .stat-card.blue::before{background:linear-gradient(90deg,var(--blue),var(--blue2))}
        .stat-card.yellow::before{background:linear-gradient(90deg,var(--orange),var(--yellow))}
        .stat-card.cyan::before{background:linear-gradient(90deg,var(--cyan),#67e8f9)}

        .stat-card .stat-bg-icon{position:absolute;right:14px;bottom:8px;font-size:44px;opacity:.04}
        .stat-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
        .stat-label{font-size:10px;font-weight:700;color:var(--t3);text-transform:uppercase;letter-spacing:1.2px}
        .stat-icon{width:34px;height:34px;border-radius:var(--radius-sm);display:flex;align-items:center;justify-content:center;font-size:16px}
        .stat-card.purple .stat-icon{background:rgba(124,58,237,.15)}
        .stat-card.green .stat-icon{background:var(--green-d)}
        .stat-card.red .stat-icon{background:var(--red-d)}
        .stat-card.blue .stat-icon{background:var(--blue-d)}
        .stat-card.yellow .stat-icon{background:var(--yellow-d)}
        .stat-card.cyan .stat-icon{background:rgba(6,182,212,.1)}

        .stat-value{font-family:'Space Grotesk',sans-serif;font-size:30px;font-weight:700;line-height:1;margin-bottom:4px}
        .stat-card.purple .stat-value{color:var(--accent2)}
        .stat-card.green .stat-value{color:var(--green2)}
        .stat-card.red .stat-value{color:var(--red2)}
        .stat-card.blue .stat-value{color:var(--blue2)}
        .stat-card.yellow .stat-value{color:var(--yellow2)}
        .stat-card.cyan .stat-value{color:#67e8f9}

        .stat-sub{font-size:10px;color:var(--t4);font-family:'JetBrains Mono',monospace}

        .dash-grid{display:grid;grid-template-columns:2fr 1fr;gap:18px}
        .dash-panel{
            background:var(--glass2);backdrop-filter:blur(20px);border:1px solid var(--brd);
            border-radius:var(--radius);overflow:hidden;
        }
        .panel-header{
            display:flex;align-items:center;justify-content:space-between;
            padding:16px 20px;border-bottom:1px solid var(--brd);
        }
        .panel-title{font-size:13px;font-weight:700;display:flex;align-items:center;gap:8px}
        .panel-title .pt-icon{font-size:15px}
        .panel-body{padding:14px 20px;max-height:420px;overflow-y:auto}

        .panel-action-btn{
            padding:5px 12px;border-radius:var(--radius-xs);background:var(--bg3);
            border:1px solid var(--brd);color:var(--t3);font-size:10px;font-weight:600;
            cursor:pointer;transition:var(--transition);font-family:'Inter',sans-serif;
        }
        .panel-action-btn:hover{background:var(--bg4);color:var(--t1)}

        /* Recent msg in dashboard */
        .recent-msg{
            display:flex;align-items:flex-start;gap:11px;padding:10px;
            border-radius:var(--radius-sm);transition:var(--transition);margin-bottom:3px;cursor:pointer;
        }
        .recent-msg:hover{background:var(--bg3)}
        .recent-msg img{width:34px;height:34px;border-radius:8px;image-rendering:pixelated}
        .recent-msg-content{flex:1;min-width:0}
        .recent-msg-header{display:flex;align-items:center;gap:7px;margin-bottom:3px}
        .recent-msg-name{font-weight:700;font-size:12px;color:var(--accent2)}
        .recent-msg-badge{font-size:8px;padding:1px 7px;border-radius:4px;font-weight:700;text-transform:uppercase;letter-spacing:.5px}
        .recent-msg-badge.chat{background:var(--green-d);color:var(--green)}
        .recent-msg-badge.command{background:var(--red-d);color:var(--red)}
        .recent-msg-text{font-size:12px;color:var(--t2);font-family:'JetBrains Mono',monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .recent-msg-text.cmd{color:var(--yellow)}
        .recent-msg-time{font-size:9px;color:var(--t4);font-family:'JetBrains Mono',monospace;margin-top:2px}

        /* Top players */
        .top-player{display:flex;align-items:center;gap:11px;padding:9px 10px;border-radius:var(--radius-sm);transition:var(--transition);margin-bottom:3px;cursor:pointer}
        .top-player:hover{background:var(--bg3)}
        .top-rank{width:24px;height:24px;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;font-family:'Space Grotesk',sans-serif;flex-shrink:0}
        .top-rank.r1{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}
        .top-rank.r2{background:linear-gradient(135deg,#94a3b8,#64748b);color:#fff}
        .top-rank.r3{background:linear-gradient(135deg,#b45309,#92400e);color:#fff}
        .top-rank.rn{background:var(--bg3);color:var(--t3)}
        .top-player img{width:32px;height:32px;border-radius:7px;image-rendering:pixelated}
        .top-player-info{flex:1;min-width:0}
        .top-player-name{font-weight:700;font-size:12px}
        .top-player-count{font-size:10px;color:var(--t3);font-family:'JetBrains Mono',monospace}
        .top-player-bar{width:70px;height:5px;background:var(--bg3);border-radius:3px;overflow:hidden;flex-shrink:0}
        .top-player-bar-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .8s cubic-bezier(.4,0,.2,1)}

        /* Activity chart */
        .chart-bars{display:flex;align-items:flex-end;gap:5px;height:130px;padding:0 4px}
        .chart-bar-wrapper{flex:1;display:flex;flex-direction:column;align-items:center;height:100%;justify-content:flex-end;gap:5px}
        .chart-bar{width:100%;border-radius:4px 4px 0 0;background:linear-gradient(180deg,var(--accent),var(--accent2));transition:all .6s cubic-bezier(.4,0,.2,1);min-height:3px;position:relative;cursor:pointer;opacity:.7}
        .chart-bar:hover{opacity:1;filter:brightness(1.2)}
        .chart-bar-label{font-size:8px;color:var(--t4);font-family:'JetBrains Mono',monospace}
        .chart-bar-tooltip{position:absolute;top:-26px;left:50%;transform:translateX(-50%);background:var(--bg4);color:var(--t1);padding:2px 7px;border-radius:4px;font-size:9px;font-weight:600;font-family:'JetBrains Mono',monospace;white-space:nowrap;opacity:0;transition:var(--transition);pointer-events:none}
        .chart-bar:hover .chart-bar-tooltip{opacity:1}

        /* ====== CHAT TAB ====== */
        .chat-layout{display:flex;height:calc(100vh - 64px)}

        .chat-sidebar{
            width:280px;background:var(--bg1);border-right:1px solid var(--brd);
            display:flex;flex-direction:column;flex-shrink:0;
        }
        .chat-sidebar-header{padding:16px 18px;border-bottom:1px solid var(--brd);display:flex;align-items:center;justify-content:space-between}
        .chat-sidebar-title{font-weight:700;font-size:13px;color:var(--t2)}
        .player-cnt-badge{background:var(--accent);color:#fff;padding:2px 10px;border-radius:20px;font-size:10px;font-weight:700;font-family:'JetBrains Mono',monospace}

        .chat-sidebar-search{padding:10px 14px;border-bottom:1px solid var(--brd)}
        .chat-sidebar-search input{
            width:100%;padding:9px 12px;background:var(--bg2);border:1px solid var(--brd);
            border-radius:var(--radius-sm);color:var(--t1);font-size:12px;font-family:'Inter',sans-serif;
            outline:none;transition:var(--transition);
        }
        .chat-sidebar-search input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow)}

        .player-list{flex:1;overflow-y:auto;padding:6px}

        .pi{
            display:flex;align-items:center;gap:11px;padding:9px 11px;border-radius:var(--radius-sm);
            cursor:pointer;transition:var(--transition);margin-bottom:2px;border:1px solid transparent;
        }
        .pi:hover{background:var(--bg3)}
        .pi.active{background:linear-gradient(135deg,var(--accent),rgba(124,58,237,.7));border-color:transparent;box-shadow:0 4px 15px rgba(124,58,237,.3)}
        .pi img{width:34px;height:34px;border-radius:7px;image-rendering:pixelated}
        .pi-info{flex:1;min-width:0}
        .pi-name{font-weight:700;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .pi-meta{font-size:10px;color:var(--t3)}
        .pi.active .pi-meta{color:rgba(255,255,255,.7)}

        .chat-area{flex:1;display:flex;flex-direction:column;min-width:0}

        .chat-toolbar{
            display:flex;gap:8px;padding:12px 18px;border-bottom:1px solid var(--brd);
            align-items:center;flex-wrap:wrap;background:var(--glass2);backdrop-filter:blur(20px);
        }
        .search-box{flex:1;min-width:180px;position:relative}
        .search-box input{
            width:100%;padding:9px 14px 9px 38px;background:var(--bg2);border:1px solid var(--brd);
            border-radius:var(--radius-sm);color:var(--t1);font-size:12px;font-family:'Inter',sans-serif;
            outline:none;transition:var(--transition);
        }
        .search-box input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow)}
        .search-box .s-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--t3)}

        .filter-btn{
            padding:9px 15px;background:var(--bg2);border:1px solid var(--brd);border-radius:var(--radius-sm);
            color:var(--t2);font-size:11px;font-weight:600;cursor:pointer;transition:var(--transition);
            font-family:'Inter',sans-serif;display:flex;align-items:center;gap:5px;
        }
        .filter-btn:hover{border-color:var(--accent);color:var(--t1);background:var(--bg3)}
        .filter-btn.active{background:linear-gradient(135deg,var(--accent),rgba(124,58,237,.8));border-color:var(--accent);color:#fff;box-shadow:0 4px 12px rgba(124,58,237,.3)}

        .messages-container{flex:1;overflow-y:auto;padding:12px 18px}

        .date-divider{
            display:flex;align-items:center;gap:14px;padding:12px 0;
            color:var(--t3);font-size:10px;font-weight:600;letter-spacing:.5px;
        }
        .date-divider::before,.date-divider::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,transparent,var(--brd),transparent)}

        .msg-row{
            display:flex;align-items:flex-start;gap:11px;padding:9px 12px;
            border-radius:var(--radius-sm);margin-bottom:3px;transition:var(--transition);
            animation:msgIn .4s cubic-bezier(.4,0,.2,1);border:1px solid transparent;
        }
        @keyframes msgIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
        .msg-row:hover{background:var(--bg2);border-color:var(--brd)}
        .msg-row img{width:32px;height:32px;border-radius:7px;image-rendering:pixelated;margin-top:2px;cursor:pointer;transition:var(--transition)}
        .msg-row img:hover{transform:scale(1.1)}
        .msg-content{flex:1;min-width:0}
        .msg-header{display:flex;align-items:center;gap:7px;margin-bottom:2px;flex-wrap:wrap}
        .msg-player{font-weight:700;font-size:12px;color:var(--accent2);cursor:pointer;transition:var(--transition)}
        .msg-player:hover{color:var(--accent3);text-decoration:underline}
        .msg-type{font-size:8px;padding:2px 7px;border-radius:4px;font-weight:700;text-transform:uppercase;letter-spacing:.5px}
        .msg-type.chat{background:var(--green-d);color:var(--green);border:1px solid var(--green-b)}
        .msg-type.command{background:var(--red-d);color:var(--red);border:1px solid var(--red-b)}
        .msg-srv{font-size:8px;color:var(--t4);background:var(--bg0);padding:2px 6px;border-radius:3px;font-family:'JetBrains Mono',monospace}
        .msg-text{font-size:12px;color:var(--t1);line-height:1.5;word-break:break-word;font-family:'JetBrains Mono',monospace}
        .msg-text.cmd{color:var(--yellow)}
        .msg-time{font-size:9px;color:var(--t4);white-space:nowrap;font-family:'JetBrains Mono',monospace;padding-top:3px}

        /* ====== PLAYERS PAGE ====== */
        .players-page{padding:28px 32px;max-width:1400px}
        .page-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;flex-wrap:wrap;gap:14px}
        .page-header h2{font-family:'Outfit',sans-serif;font-size:24px;font-weight:700}
        .page-search{position:relative;width:280px}
        .page-search input{
            width:100%;padding:9px 14px 9px 38px;background:var(--bg2);border:1px solid var(--brd);
            border-radius:var(--radius-sm);color:var(--t1);font-size:12px;font-family:'Inter',sans-serif;
            outline:none;transition:var(--transition);
        }
        .page-search input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow)}
        .page-search .s-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--t3)}

        .players-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px}

        .player-card{
            background:var(--glass2);backdrop-filter:blur(20px);border:1px solid var(--brd);
            border-radius:var(--radius);padding:22px;transition:var(--transition);cursor:pointer;
            position:relative;overflow:hidden;
        }
        .player-card:hover{transform:translateY(-4px);border-color:var(--accent);box-shadow:0 8px 30px rgba(124,58,237,.15)}
        .player-card::before{content:'';position:absolute;top:0;left:0;right:0;height:55px;background:linear-gradient(135deg,rgba(124,58,237,.1),rgba(16,185,129,.05))}
        .player-card-top{display:flex;align-items:center;gap:14px;margin-bottom:16px;position:relative}
        .player-card-avatar{width:50px;height:50px;border-radius:12px;image-rendering:pixelated;border:2px solid var(--brd2);transition:var(--transition)}
        .player-card:hover .player-card-avatar{border-color:var(--accent);transform:scale(1.05)}
        .player-card-name{font-size:16px;font-weight:700;font-family:'Outfit',sans-serif}
        .player-card-uuid{font-size:9px;color:var(--t4);font-family:'JetBrains Mono',monospace;margin-top:2px}
        .player-card-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;position:relative}
        .pcs{text-align:center;padding:8px;background:var(--bg0);border-radius:var(--radius-xs)}
        .pcs-val{font-family:'Space Grotesk',sans-serif;font-size:18px;font-weight:700}
        .pcs-lbl{font-size:9px;color:var(--t3);text-transform:uppercase;letter-spacing:.5px;margin-top:1px}
        .purple{color:var(--accent2)}.grn{color:var(--green2)}.rd{color:var(--red2)}.bl{color:var(--blue2)}.yl{color:var(--yellow2)}

        /* ====== STATS PAGE ====== */
        .stats-page{padding:28px 32px;max-width:1400px}
        .stats-page h2{font-family:'Outfit',sans-serif;font-size:24px;font-weight:700;margin-bottom:24px}
        .stats-grid-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(380px,1fr));gap:18px}

        .type-dist{display:flex;flex-direction:column;gap:12px;padding:4px 0}
        .type-bar{display:flex;align-items:center;gap:12px}
        .type-bar-label{width:80px;font-size:11px;font-weight:600;color:var(--t2)}
        .type-bar-track{flex:1;height:26px;background:var(--bg0);border-radius:6px;overflow:hidden}
        .type-bar-fill{height:100%;border-radius:6px;transition:width 1s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;padding:0 10px;font-size:10px;font-weight:700;color:#fff;font-family:'JetBrains Mono',monospace}
        .type-bar-fill.chat-fill{background:linear-gradient(90deg,var(--green),var(--green2))}
        .type-bar-fill.cmd-fill{background:linear-gradient(90deg,var(--red),var(--red2))}
        .type-bar-val{width:45px;text-align:right;font-size:13px;font-weight:700;font-family:'Space Grotesk',sans-serif;color:var(--t1)}

        .heatmap{display:grid;grid-template-columns:repeat(24,1fr);gap:3px;padding:4px 0}
        .hm-cell{aspect-ratio:1;border-radius:3px;position:relative;cursor:pointer;transition:var(--transition)}
        .hm-cell:hover{transform:scale(1.4);z-index:10}
        .hm-cell .hm-tt{position:absolute;bottom:calc(100% + 5px);left:50%;transform:translateX(-50%);background:var(--bg4);color:var(--t1);padding:3px 8px;border-radius:4px;font-size:9px;font-weight:600;font-family:'JetBrains Mono',monospace;white-space:nowrap;opacity:0;pointer-events:none;transition:var(--transition)}
        .hm-cell:hover .hm-tt{opacity:1}
        .hm-labels{display:grid;grid-template-columns:repeat(24,1fr);gap:3px;margin-top:3px}
        .hm-labels span{font-size:7px;color:var(--t4);text-align:center;font-family:'JetBrains Mono',monospace}

        .word-cloud{display:flex;flex-wrap:wrap;gap:6px;padding:4px 0;align-items:center;justify-content:center}
        .word-tag{padding:5px 12px;border-radius:18px;font-family:'JetBrains Mono',monospace;font-weight:600;transition:var(--transition);cursor:default;border:1px solid var(--brd)}
        .word-tag:hover{transform:scale(1.1);border-color:var(--accent)}

        .server-list{display:flex;flex-direction:column;gap:6px}
        .server-item{display:flex;align-items:center;gap:11px;padding:10px 12px;background:var(--bg0);border-radius:var(--radius-sm);transition:var(--transition)}
        .server-item:hover{background:var(--bg3)}
        .server-icon{width:34px;height:34px;border-radius:8px;background:var(--bg3);display:flex;align-items:center;justify-content:center;font-size:15px}
        .server-info{flex:1}
        .server-name{font-size:12px;font-weight:700;font-family:'JetBrains Mono',monospace}
        .server-count{font-size:10px;color:var(--t3)}

        /* ====== TIMELINE PAGE ====== */
        .timeline-page{padding:28px 32px;max-width:900px}
        .timeline-page h2{font-family:'Outfit',sans-serif;font-size:24px;font-weight:700;margin-bottom:24px}
        .timeline{position:relative;padding-left:30px}
        .timeline::before{content:'';position:absolute;left:11px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,var(--accent),var(--green),var(--accent));border-radius:2px}
        .tl-item{position:relative;margin-bottom:24px;animation:msgIn .4s ease}
        .tl-dot{position:absolute;left:-24px;top:4px;width:12px;height:12px;border-radius:50%;border:3px solid var(--bg1)}
        .tl-dot.chat{background:var(--green)}
        .tl-dot.command{background:var(--red)}
        .tl-card{background:var(--bg2);border:1px solid var(--brd);border-radius:var(--radius-sm);padding:14px 18px;transition:var(--transition)}
        .tl-card:hover{border-color:var(--brd2);box-shadow:var(--shadow)}
        .tl-card-header{display:flex;align-items:center;gap:10px;margin-bottom:8px}
        .tl-card-header img{width:28px;height:28px;border-radius:6px;image-rendering:pixelated}
        .tl-card-name{font-weight:700;font-size:12px;color:var(--accent2)}
        .tl-card-time{font-size:9px;color:var(--t4);font-family:'JetBrains Mono',monospace;margin-left:auto}
        .tl-card-msg{font-size:12px;font-family:'JetBrains Mono',monospace;color:var(--t1);line-height:1.5}
        .tl-card-msg.cmd{color:var(--yellow)}

        /* ====== SETTINGS PAGE ====== */
        .settings-page{padding:28px 32px;max-width:900px}
        .settings-page h2{font-family:'Outfit',sans-serif;font-size:24px;font-weight:700;margin-bottom:24px}
        .settings-section{background:var(--glass2);border:1px solid var(--brd);border-radius:var(--radius);margin-bottom:18px;overflow:hidden}
        .settings-section-title{padding:16px 20px;border-bottom:1px solid var(--brd);font-size:14px;font-weight:700;display:flex;align-items:center;gap:8px}
        .setting-row{
            display:flex;align-items:center;justify-content:space-between;padding:14px 20px;
            border-bottom:1px solid var(--brd);transition:var(--transition);
        }
        .setting-row:last-child{border-bottom:none}
        .setting-row:hover{background:var(--bg3)}
        .setting-info{flex:1}
        .setting-name{font-size:13px;font-weight:600}
        .setting-desc{font-size:11px;color:var(--t3);margin-top:2px}

        .toggle{
            width:44px;height:24px;border-radius:12px;background:var(--bg3);
            border:2px solid var(--brd2);cursor:pointer;position:relative;
            transition:var(--transition);flex-shrink:0;
        }
        .toggle.on{background:var(--accent);border-color:var(--accent)}
        .toggle::after{
            content:'';position:absolute;top:2px;left:2px;width:16px;height:16px;
            border-radius:50%;background:#fff;transition:var(--transition);
            box-shadow:0 2px 4px rgba(0,0,0,.2);
        }
        .toggle.on::after{left:22px}

        .theme-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;padding:16px 20px}
        .theme-option{
            padding:14px;border-radius:var(--radius-sm);border:2px solid var(--brd);
            cursor:pointer;transition:var(--transition);text-align:center;
        }
        .theme-option:hover{border-color:var(--brd2);transform:translateY(-2px)}
        .theme-option.active{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow)}
        .theme-preview{
            width:100%;height:30px;border-radius:6px;margin-bottom:8px;
        }
        .theme-name{font-size:11px;font-weight:600}

        /* ====== NOTIFICATIONS PANEL (slide) ====== */
        .notif-panel{
            position:fixed;right:0;top:0;bottom:0;width:380px;max-width:90vw;
            background:var(--bg1);border-left:1px solid var(--brd);z-index:5000;
            transform:translateX(100%);transition:transform .4s cubic-bezier(.4,0,.2,1);
            display:flex;flex-direction:column;
        }
        .notif-panel.open{transform:translateX(0)}
        .notif-panel-header{
            padding:18px 20px;border-bottom:1px solid var(--brd);display:flex;
            align-items:center;justify-content:space-between;
        }
        .notif-panel-title{font-size:16px;font-weight:700;font-family:'Outfit',sans-serif}
        .notif-panel-close{
            width:32px;height:32px;border-radius:8px;background:var(--bg2);border:1px solid var(--brd);
            color:var(--t3);display:flex;align-items:center;justify-content:center;cursor:pointer;
            transition:var(--transition);font-size:14px;
        }
        .notif-panel-close:hover{background:var(--bg3);color:var(--t1)}
        .notif-list{flex:1;overflow-y:auto;padding:12px}
        .notif-item{
            padding:12px 14px;border-radius:var(--radius-sm);background:var(--bg2);
            border:1px solid var(--brd);margin-bottom:8px;transition:var(--transition);
            animation:msgIn .3s ease;
        }
        .notif-item:hover{border-color:var(--brd2)}
        .notif-item-header{display:flex;align-items:center;gap:8px;margin-bottom:4px}
        .notif-item-icon{font-size:16px}
        .notif-item-title{font-size:12px;font-weight:700;flex:1}
        .notif-item-time{font-size:9px;color:var(--t4);font-family:'JetBrains Mono',monospace}
        .notif-item-body{font-size:11px;color:var(--t2)}
        .notif-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--t3);gap:8px}

        .notif-overlay{
            position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:4999;
            opacity:0;pointer-events:none;transition:opacity .3s;
        }
        .notif-overlay.show{opacity:1;pointer-events:auto}

        /* ====== PROFILE MODAL ====== */
        .modal-overlay{
            position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(8px);
            z-index:6000;display:none;align-items:center;justify-content:center;padding:20px;
        }
        .modal-overlay.show{display:flex;animation:fadeIn .3s}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}

        .modal{
            width:100%;max-width:750px;max-height:85vh;background:var(--bg1);
            border:1px solid var(--brd2);border-radius:20px;overflow:hidden;
            animation:modalIn .4s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;
        }
        @keyframes modalIn{from{opacity:0;transform:scale(.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}

        .modal-banner{height:110px;background:linear-gradient(135deg,var(--accent),var(--blue),var(--green));position:relative}
        .modal-banner-pattern{position:absolute;inset:0;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}
        .modal-close{position:absolute;top:10px;right:10px;width:30px;height:30px;border-radius:50%;background:rgba(0,0,0,.3);backdrop-filter:blur(10px);border:none;color:#fff;font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--transition);z-index:10}
        .modal-close:hover{background:rgba(0,0,0,.5);transform:rotate(90deg)}

        .modal-avatar-wrap{position:relative;margin-top:-40px;padding:0 24px;display:flex;align-items:flex-end;gap:16px;z-index:5}
        .modal-avatar{width:80px;height:80px;border-radius:16px;image-rendering:pixelated;border:4px solid var(--bg1);box-shadow:var(--shadow)}
        .modal-name-section{padding-bottom:12px}
        .modal-pname{font-family:'Outfit',sans-serif;font-size:24px;font-weight:700}
        .modal-puuid{font-size:10px;color:var(--t3);font-family:'JetBrains Mono',monospace}

        .modal-stats-row{display:flex;gap:14px;padding:16px 24px;border-bottom:1px solid var(--brd)}
        .modal-stat{flex:1;text-align:center;padding:10px;background:var(--bg2);border-radius:var(--radius-sm)}
        .modal-stat-val{font-family:'Space Grotesk',sans-serif;font-size:22px;font-weight:700}
        .modal-stat-lbl{font-size:9px;color:var(--t3);text-transform:uppercase;letter-spacing:1px;margin-top:3px}
        .modal-messages{flex:1;overflow-y:auto;padding:14px 24px}
        .modal-section-title{font-size:12px;font-weight:700;color:var(--t2);text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;display:flex;align-items:center;gap:8px}

        /* ====== TOAST ====== */
        .toast-container{position:fixed;top:74px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:8px}
        .toast{
            background:var(--bg2);border:1px solid var(--brd2);border-radius:var(--radius-sm);
            padding:10px 16px;display:flex;align-items:center;gap:9px;font-size:12px;font-weight:500;
            box-shadow:var(--shadow-lg);animation:toastIn .4s cubic-bezier(.4,0,.2,1),toastOut .3s ease 3s forwards;
            min-width:220px;
        }
        @keyframes toastIn{from{opacity:0;transform:translateX(100px)}to{opacity:1;transform:translateX(0)}}
        @keyframes toastOut{to{opacity:0;transform:translateX(100px)}}
        .toast-icon{font-size:16px}

        /* ====== EMPTY STATE ====== */
        .empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--t3);gap:10px;padding:40px}
        .empty-icon{font-size:50px;animation:emptyBounce 2s ease-in-out infinite}
        @keyframes emptyBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
        .empty-title{font-size:18px;font-weight:700;color:var(--t2);font-family:'Outfit',sans-serif}
        .empty-desc{font-size:12px;text-align:center;max-width:280px}

        /* ====== SCROLLBAR ====== */
        ::-webkit-scrollbar{width:5px}
        ::-webkit-scrollbar-track{background:transparent}
        ::-webkit-scrollbar-thumb{background:var(--brd2);border-radius:3px}
        ::-webkit-scrollbar-thumb:hover{background:var(--t4)}

        /* ====== RESPONSIVE ====== */
        @media(max-width:1024px){
            .dash-grid{grid-template-columns:1fr}
            .stats-grid-2{grid-template-columns:1fr}
            .dash-hero-time{display:none}
        }
        @media(max-width:768px){
            .sidebar-nav{transform:translateX(-100%);width:280px!important;z-index:2000}
            .sidebar-nav.mobile-open{transform:translateX(0)}
            .main-content{margin-left:0!important}
            .menu-toggle{display:flex}
            .header{padding:0 14px;height:56px}
            .logo-text{font-size:16px}
            .logo-ver{display:none}
            .chat-sidebar{display:none}
            .dashboard,.players-page,.stats-page,.timeline-page,.settings-page{padding:14px}
            .stats-grid{grid-template-columns:repeat(2,1fr)}
            .players-grid{grid-template-columns:1fr}
            .stats-grid-2{grid-template-columns:1fr}
            .hdr-btn-text span{display:none}
            .refresh-ind span{display:none}
            .page-search{width:100%}
        }
    </style>
</head>
<body>

<!-- ====== LOGIN SCREEN ====== -->
<div class="login-overlay" id="loginOverlay">
    <div class="login-bg">
        <div class="orb"></div><div class="orb"></div><div class="orb"></div>
    </div>
    <div class="login-particles" id="loginParticles"></div>
    <div class="login-card">
        <div class="login-logo"></div>
        <div class="login-title">KeyLogger By Fleety</div>
        <div class="login-subtitle">Zaloguj si aby uzyska dostp do dashboardu</div>
        <form onsubmit="return handleLogin(event)">
            <div class="login-input-group">
                <div class="login-input-icon"></div>
                <input type="password" class="login-input" id="loginPassword" placeholder="Wprowad haso..." autocomplete="off" autofocus>
            </div>
            <div class="login-error" id="loginError"> Nieprawidowe haso! Sprbuj ponownie.</div>
            <button type="submit" class="login-btn">
                <span class="btn-shine"></span>
                Zaloguj si 
            </button>
        </form>
        <div class="login-attempts" id="loginAttempts"></div>
        <div class="login-footer">
            <span class="lock"></span> Szyfrowane poczenie
        </div>
    </div>
</div>

<!-- ====== APP ====== -->
<div class="app" id="app">
    <!-- BG -->
    <div class="bg-effects"><div class="bg-orb"></div><div class="bg-orb"></div><div class="bg-orb"></div><div class="bg-grid"></div></div>

    <!-- Toast -->
    <div class="toast-container" id="toasts"></div>

    <!-- Notifications Panel -->
    <div class="notif-overlay" id="notifOverlay" onclick="toggleNotifPanel()"></div>
    <div class="notif-panel" id="notifPanel">
        <div class="notif-panel-header">
            <div class="notif-panel-title"> Powiadomienia</div>
            <button class="notif-panel-close" onclick="toggleNotifPanel()"></button>
        </div>
        <div class="notif-list" id="notifList">
            <div class="notif-empty"><div style="font-size:40px"></div><div>Brak powiadomie</div></div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal-overlay" id="profileModal">
        <div class="modal">
            <div class="modal-banner"><div class="modal-banner-pattern"></div><button class="modal-close" onclick="closeProfile()"></button></div>
            <div class="modal-avatar-wrap"><img class="modal-avatar" id="modalAvatar" src=""><div class="modal-name-section"><div class="modal-pname" id="modalName"></div><div class="modal-puuid" id="modalUUID"></div></div></div>
            <div class="modal-stats-row">
                <div class="modal-stat"><div class="modal-stat-val purple" id="modalTotal">0</div><div class="modal-stat-lbl">cznie</div></div>
                <div class="modal-stat"><div class="modal-stat-val grn" id="modalChat">0</div><div class="modal-stat-lbl">Chat</div></div>
                <div class="modal-stat"><div class="modal-stat-val rd" id="modalCmd">0</div><div class="modal-stat-lbl">Komendy</div></div>
            </div>
            <div class="modal-messages" id="modalMessages"></div>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="header-left">
            <button class="menu-toggle" onclick="toggleMobileMenu()"></button>
            <div class="logo" onclick="switchTab('dashboard')">
                <div class="logo-icon"></div>
                <div class="logo-text">MC Logger</div>
                <span class="logo-ver">v2.0</span>
            </div>
            <div class="status-badge connecting" id="statusBadge"><div class="status-dot"></div><span id="statusText">czenie...</span></div>
        </div>
        <div class="header-right">
            <div class="refresh-ind"><div class="spinner"></div><span>Auto-refresh 3s</span></div>
            <button class="hdr-btn-text" id="soundBtn" onclick="toggleSound()" title="Dwiki"> <span>Dwik</span></button>
            <button class="hdr-btn" onclick="toggleNotifPanel()" title="Powiadomienia"><div class="notif-dot" id="notifDot"></div></button>
            <button class="hdr-btn" onclick="loadData()" title="Odwie"></button>
            <button class="hdr-btn" onclick="exportData()" title="Eksport"></button>
            <button class="hdr-btn" onclick="logout()" title="Wyloguj"></button>
        </div>
    </header>

    <!-- Sidebar Navigation -->
    <nav class="sidebar-nav" id="sidebarNav">
        <div class="nav-section">
            <div class="nav-section-title">Gwne</div>
            <div class="nav-item active" data-tab="dashboard" onclick="switchTab('dashboard')">
                <span class="nav-icon"></span><span class="nav-label">Dashboard</span>
            </div>
            <div class="nav-item" data-tab="chat" onclick="switchTab('chat')">
                <span class="nav-icon"></span><span class="nav-label">Chat</span>
                <span class="nav-count" id="navChatCount">0</span>
            </div>
            <div class="nav-item" data-tab="players" onclick="switchTab('players')">
                <span class="nav-icon"></span><span class="nav-label">Gracze</span>
                <span class="nav-count" id="navPlayersCount">0</span>
            </div>
        </div>
        <div class="nav-section">
            <div class="nav-section-title">Analiza</div>
            <div class="nav-item" data-tab="stats" onclick="switchTab('stats')">
                <span class="nav-icon"></span><span class="nav-label">Statystyki</span>
            </div>
            <div class="nav-item" data-tab="timeline" onclick="switchTab('timeline')">
                <span class="nav-icon"></span><span class="nav-label">Timeline</span>
            </div>
        </div>
        <div class="nav-section">
            <div class="nav-section-title">System</div>
            <div class="nav-item" data-tab="settings" onclick="switchTab('settings')">
                <span class="nav-icon"></span><span class="nav-label">Ustawienia</span>
            </div>
        </div>

        <div class="sidebar-footer">
            <div class="sidebar-footer-user">
                <div class="sidebar-footer-avatar"></div>
                <div class="sidebar-footer-text">
                    <div class="sidebar-footer-name">Admin</div>
                    <div class="sidebar-footer-role">Zalogowany</div>
                </div>
            </div>
            <button class="sidebar-collapse-btn" onclick="toggleSidebar()">
                <span id="collapseIcon"></span>
                <span class="sidebar-footer-text">Zwi</span>
            </button>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="main-content" id="mainContent">

        <!-- DASHBOARD -->
        <div class="tab-content active" id="tab-dashboard">
            <div class="dashboard">
                <div class="dash-hero">
                    <h1 id="greeting">Witaj! </h1>
                    <p>Kompleksowy przegld aktywnoci na serwerze Minecraft. Monitoruj chat, komendy i statystyki graczy w czasie rzeczywistym.</p>
                    <div class="dash-hero-time">
                        <div class="dash-hero-clock" id="liveClock">00:00:00</div>
                        <div class="dash-hero-date" id="liveDate"></div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card purple"><div class="stat-bg-icon"></div><div class="stat-header"><div class="stat-label">Wszystkie</div><div class="stat-icon"></div></div><div class="stat-value" id="sTotal"></div><div class="stat-sub" id="sTotalSub">adowanie...</div></div>
                    <div class="stat-card green"><div class="stat-bg-icon"></div><div class="stat-header"><div class="stat-label">Chat</div><div class="stat-icon"></div></div><div class="stat-value" id="sChat"></div><div class="stat-sub">wiadomoci</div></div>
                    <div class="stat-card red"><div class="stat-bg-icon"></div><div class="stat-header"><div class="stat-label">Komendy</div><div class="stat-icon"></div></div><div class="stat-value" id="sCmd"></div><div class="stat-sub">komend</div></div>
                    <div class="stat-card blue"><div class="stat-bg-icon"></div><div class="stat-header"><div class="stat-label">Gracze</div><div class="stat-icon"></div></div><div class="stat-value" id="sPlayers"></div><div class="stat-sub">unikalnych</div></div>
                    <div class="stat-card yellow"><div class="stat-bg-icon"></div><div class="stat-header"><div class="stat-label">Dzisiaj</div><div class="stat-icon"></div></div><div class="stat-value" id="sToday"></div><div class="stat-sub">dzi</div></div>
                    <div class="stat-card cyan"><div class="stat-bg-icon"></div><div class="stat-header"><div class="stat-label">Serwery</div><div class="stat-icon"></div></div><div class="stat-value" id="sServers"></div><div class="stat-sub">aktywnych</div></div>
                </div>

                <div class="dash-grid">
                    <div class="dash-panel">
                        <div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> Ostatnie wiadomoci</div><button class="panel-action-btn" onclick="switchTab('chat')">Wicej </button></div>
                        <div class="panel-body" id="recentMessages"><div class="empty-state" style="height:200px"><div class="empty-icon"></div><div class="empty-title">adowanie...</div></div></div>
                    </div>
                    <div>
                        <div class="dash-panel" style="margin-bottom:18px">
                            <div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> Top gracze</div></div>
                            <div class="panel-body" id="topPlayers"><div class="empty-state" style="height:100px"><div class="empty-icon" style="font-size:28px"></div></div></div>
                        </div>
                        <div class="dash-panel">
                            <div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> 7 dni</div></div>
                            <div style="padding:16px 20px"><div class="chart-bars" id="activityChart"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CHAT -->
        <div class="tab-content" id="tab-chat">
            <div class="chat-layout">
                <div class="chat-sidebar">
                    <div class="chat-sidebar-header"><span class="chat-sidebar-title">Gracze</span><span class="player-cnt-badge" id="chatPlayerCnt">0</span></div>
                    <div class="chat-sidebar-search"><input type="text" id="playerSearchInput" placeholder="Szukaj gracza..." oninput="renderChatSidebar()"></div>
                    <div class="player-list" id="playerList"></div>
                </div>
                <div class="chat-area">
                    <div class="chat-toolbar">
                        <div class="search-box"><span class="s-icon"></span><input type="text" id="chatSearchInput" placeholder="Szukaj wiadomoci..." oninput="filterMessages()"></div>
                        <button class="filter-btn active" data-filter="all" onclick="setFilter('all')"> Wszystko</button>
                        <button class="filter-btn" data-filter="chat" onclick="setFilter('chat')"> Chat</button>
                        <button class="filter-btn" data-filter="command" onclick="setFilter('command')"> Komendy</button>
                    </div>
                    <div class="messages-container" id="messagesContainer">
                        <div class="empty-state"><div class="empty-icon"></div><div class="empty-title">adowanie...</div><div class="empty-desc">czenie z baz danych</div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PLAYERS -->
        <div class="tab-content" id="tab-players">
            <div class="players-page">
                <div class="page-header"><h2> Wszyscy gracze</h2><div class="page-search"><span class="s-icon"></span><input type="text" id="playersPageSearch" placeholder="Szukaj..." oninput="renderPlayersPage()"></div></div>
                <div class="players-grid" id="playersGrid"></div>
            </div>
        </div>

        <!-- STATS -->
        <div class="tab-content" id="tab-stats">
            <div class="stats-page">
                <h2> Statystyki serwera</h2>
                <div class="stats-grid-2">
                    <div class="dash-panel"><div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> Typy wiadomoci</div></div><div class="panel-body" id="typeDist"></div></div>
                    <div class="dash-panel"><div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> Aktywno godzinowa</div></div><div class="panel-body" id="hourlyHM"></div></div>
                    <div class="dash-panel"><div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> Serwery</div></div><div class="panel-body" id="serverStats"></div></div>
                    <div class="dash-panel"><div class="panel-header"><div class="panel-title"><span class="pt-icon"></span> Czste sowa</div></div><div class="panel-body" id="wordCloud"></div></div>
                </div>
            </div>
        </div>

        <!-- TIMELINE -->
        <div class="tab-content" id="tab-timeline">
            <div class="timeline-page">
                <h2> Timeline</h2>
                <div class="timeline" id="timelineContent"></div>
            </div>
        </div>

        <!-- SETTINGS -->
        <div class="tab-content" id="tab-settings">
            <div class="settings-page">
                <h2> Ustawienia</h2>

                <div class="settings-section">
                    <div class="settings-section-title"> Motyw</div>
                    <div class="theme-grid" id="themeGrid"></div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title"> Powiadomienia</div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Dwiki powiadomie</div><div class="setting-desc">Odtwarzaj dwik przy nowych wiadomociach</div></div>
                        <div class="toggle" id="toggleSound" onclick="toggleSound()"></div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Powiadomienia przegldarkowe</div><div class="setting-desc">Wywietlaj powiadomienia systemowe</div></div>
                        <div class="toggle" id="toggleBrowserNotif" onclick="toggleBrowserNotif()"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title"> Oglne</div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Auto-refresh</div><div class="setting-desc">Automatyczne odwieanie co 3 sekundy</div></div>
                        <div class="toggle on" id="toggleAutoRefresh" onclick="toggleAutoRefresh()"></div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Animacje</div><div class="setting-desc">Efekty animacji interfejsu</div></div>
                        <div class="toggle on" id="toggleAnimations" onclick="toggleAnimations()"></div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Kompaktowy widok</div><div class="setting-desc">Zmniejszone odstpy w czacie</div></div>
                        <div class="toggle" id="toggleCompact" onclick="toggleCompact()"></div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="settings-section-title"> Dane</div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Eksportuj dane</div><div class="setting-desc">Pobierz wszystkie logi</div></div>
                        <button class="panel-action-btn" onclick="exportData()"> Eksportuj TXT</button>
                    </div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Eksport JSON</div><div class="setting-desc">Pobierz w formacie JSON</div></div>
                        <button class="panel-action-btn" onclick="exportJSON()"> Eksportuj JSON</button>
                    </div>
                    <div class="setting-row">
                        <div class="setting-info"><div class="setting-name">Eksport CSV</div><div class="setting-desc">Pobierz w formacie CSV</div></div>
                        <button class="panel-action-btn" onclick="exportCSV()"> Eksportuj CSV</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
// ====== CONFIG ======
const SU='https://xdgamprlpessumhwndho.supabase.co';
const SK='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhkZ2FtcHJscGVzc3VtaHduZGhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NzIxNDgsImV4cCI6MjA4NzQ0ODE0OH0.uX05xDdhKezmyNpFc7bRcR2RB6dDsES65B_qK0_-qTI';
const PASSWORD='chomik';

// ====== STATE ======
let allMessages=[],players={},selectedPlayer=null,currentFilter='all',searchQuery='',currentTab='dashboard';
let previousCount=0,isFirstLoad=true,soundEnabled=false,autoRefreshEnabled=true,refreshInterval=null;
let notifications=[];

// ====== THEMES ======
const themes=[
    {id:'default',name:'Domylny',colors:['#7c3aed','#0a0c1a','#111328']},
    {id:'midnight',name:'Midnight',colors:['#6366f1','#0f172a','#1e293b']},
    {id:'ocean',name:'Ocean',colors:['#0ea5e9','#001d35','#00294d']},
    {id:'forest',name:'Forest',colors:['#10b981','#064e3b','#065f46']},
    {id:'sunset',name:'Sunset',colors:['#f97316','#2d1600','#431f00']},
    {id:'sakura',name:'Sakura',colors:['#ec4899','#2d1225','#401a35']},
    {id:'light',name:'Jasny',colors:['#7c3aed','#f1f5f9','#e2e8f0']},
    {id:'amoled',name:'AMOLED',colors:['#7c3aed','#000000','#0a0a0a']},
];

// ====== AUDIO ======
const AudioCtx=window.AudioContext||window.webkitAudioContext;
let audioCtx;
function playNotifSound(){
    if(!soundEnabled)return;
    try{
        if(!audioCtx)audioCtx=new AudioCtx();
        const o=audioCtx.createOscillator(),g=audioCtx.createGain();
        o.connect(g);g.connect(audioCtx.destination);
        o.frequency.setValueAtTime(880,audioCtx.currentTime);
        o.frequency.exponentialRampToValueAtTime(440,audioCtx.currentTime+.15);
        g.gain.setValueAtTime(.15,audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.3);
        o.start(audioCtx.currentTime);o.stop(audioCtx.currentTime+.3);
    }catch(e){}
}
function playLoginSound(){
    try{
        if(!audioCtx)audioCtx=new AudioCtx();
        const notes=[523.25,659.25,783.99];
        notes.forEach((freq,i)=>{
            const o=audioCtx.createOscillator(),g=audioCtx.createGain();
            o.connect(g);g.connect(audioCtx.destination);o.type='sine';
            o.frequency.setValueAtTime(freq,audioCtx.currentTime+i*.12);
            g.gain.setValueAtTime(.1,audioCtx.currentTime+i*.12);
            g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+i*.12+.3);
            o.start(audioCtx.currentTime+i*.12);o.stop(audioCtx.currentTime+i*.12+.3);
        });
    }catch(e){}
}
function playErrorSound(){
    try{
        if(!audioCtx)audioCtx=new AudioCtx();
        const o=audioCtx.createOscillator(),g=audioCtx.createGain();
        o.connect(g);g.connect(audioCtx.destination);o.type='sawtooth';
        o.frequency.setValueAtTime(200,audioCtx.currentTime);
        g.gain.setValueAtTime(.08,audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(.01,audioCtx.currentTime+.2);
        o.start(audioCtx.currentTime);o.stop(audioCtx.currentTime+.2);
    }catch(e){}
}

// ====== UTILITY ======
function esc(t){if(!t)return'';const d=document.createElement('div');d.textContent=t;return d.innerHTML}
function timeAgo(d){const s=Math.floor((new Date()-d)/1000);if(s<60)return'teraz';if(s<3600)return Math.floor(s/60)+'m temu';if(s<86400)return Math.floor(s/3600)+'h temu';return Math.floor(s/86400)+'d temu'}
function showToast(icon,msg){const c=document.getElementById('toasts'),t=document.createElement('div');t.className='toast';t.innerHTML=`<span class="toast-icon">${icon}</span>${msg}`;c.appendChild(t);setTimeout(()=>t.remove(),3500)}
function animNum(el,target){const cur=parseInt(el.textContent)||0;if(cur===target)return;const diff=target-cur,steps=25,inc=diff/steps;let step=0;const iv=setInterval(()=>{step++;el.textContent=Math.round(cur+inc*step);if(step>=steps){el.textContent=target;clearInterval(iv)}},20)}

// ====== LOGIN ======
let loginAttempts=0;
function createLoginParticles(){
    const c=document.getElementById('loginParticles');
    for(let i=0;i<30;i++){
        const p=document.createElement('div');p.className='login-particle';
        p.style.left=Math.random()*100+'%';p.style.top=Math.random()*100+'%';
        p.style.animationDelay=Math.random()*6+'s';p.style.animationDuration=(4+Math.random()*4)+'s';
        c.appendChild(p);
    }
}

function handleLogin(e){
    e.preventDefault();
    const pwd=document.getElementById('loginPassword').value;
    if(pwd===PASSWORD){
        playLoginSound();
        document.getElementById('loginOverlay').classList.add('hidden');
        document.getElementById('app').classList.add('visible');
        setTimeout(()=>{document.getElementById('loginOverlay').style.display='none'},600);
        sessionStorage.setItem('mc_logged','1');
        showToast('','Zalogowano pomylnie!');
        startApp();
    }else{
        loginAttempts++;
        playErrorSound();
        document.getElementById('loginPassword').classList.add('error');
        document.getElementById('loginError').classList.add('show');
        document.getElementById('loginAttempts').textContent=`Prba ${loginAttempts}/5`;
        setTimeout(()=>{
            document.getElementById('loginPassword').classList.remove('error');
            document.getElementById('loginError').classList.remove('show');
        },2000);
        if(loginAttempts>=5){
            document.getElementById('loginPassword').disabled=true;
            document.getElementById('loginError').textContent=' Zbyt wiele prb! Odwie stron.';
            document.getElementById('loginError').classList.add('show');
        }
    }
    return false;
}

function logout(){
    sessionStorage.removeItem('mc_logged');
    location.reload();
}

// ====== CHECK SESSION ======
if(sessionStorage.getItem('mc_logged')==='1'){
    document.getElementById('loginOverlay').classList.add('hidden');
    document.getElementById('loginOverlay').style.display='none';
    document.getElementById('app').classList.add('visible');
}

// ====== CLOCK ======
function updateClock(){
    const n=new Date();
    document.getElementById('liveClock').textContent=n.toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
    document.getElementById('liveDate').textContent=n.toLocaleDateString('pl-PL',{weekday:'long',day:'numeric',month:'long',year:'numeric'});
}

function updateGreeting(){
    const h=new Date().getHours();const el=document.getElementById('greeting');
    if(h<6)el.textContent='Dobrej nocy! ';
    else if(h<12)el.textContent='Dzie dobry! ';
    else if(h<18)el.textContent='Cze! ';
    else el.textContent='Dobry wieczr! ';
}

// ====== TABS ======
function switchTab(tab){
    currentTab=tab;
    document.querySelectorAll('.nav-item').forEach(n=>n.classList.toggle('active',n.dataset.tab===tab));
    document.querySelectorAll('.tab-content').forEach(c=>c.classList.toggle('active',c.id==='tab-'+tab));
    if(tab==='players')renderPlayersPage();
    if(tab==='stats')renderStats();
    if(tab==='timeline')renderTimeline();
    if(tab==='settings')renderSettings();
    // close mobile menu
    document.getElementById('sidebarNav').classList.remove('mobile-open');
}

// ====== SIDEBAR ======
function toggleSidebar(){
    const s=document.getElementById('sidebarNav');
    s.classList.toggle('collapsed');
    document.getElementById('collapseIcon').textContent=s.classList.contains('collapsed')?'':'';
}
function toggleMobileMenu(){document.getElementById('sidebarNav').classList.toggle('mobile-open')}

// ====== NOTIFICATIONS PANEL ======
function toggleNotifPanel(){
    const p=document.getElementById('notifPanel'),o=document.getElementById('notifOverlay');
    p.classList.toggle('open');o.classList.toggle('show');
    document.getElementById('notifDot').classList.remove('show');
}
function addNotification(icon,title,body){
    notifications.unshift({icon,title,body,time:new Date()});
    if(notifications.length>50)notifications.pop();
    renderNotifications();
    document.getElementById('notifDot').classList.add('show');
}
function renderNotifications(){
    const c=document.getElementById('notifList');
    if(!notifications.length){c.innerHTML='<div class="notif-empty"><div style="font-size:40px"></div><div>Brak powiadomie</div></div>';return}
    c.innerHTML=notifications.slice(0,30).map(n=>`<div class="notif-item"><div class="notif-item-header"><span class="notif-item-icon">${n.icon}</span><span class="notif-item-title">${esc(n.title)}</span><span class="notif-item-time">${timeAgo(n.time)}</span></div><div class="notif-item-body">${esc(n.body)}</div></div>`).join('');
}

// ====== SETTINGS TOGGLES ======
function toggleSound(){
    soundEnabled=!soundEnabled;
    document.getElementById('toggleSound').classList.toggle('on',soundEnabled);
    document.getElementById('soundBtn').classList.toggle('active',soundEnabled);
    if(soundEnabled)playNotifSound();
    showToast(soundEnabled?'':'',soundEnabled?'Dwiki wczone':'Dwiki wyczone');
}
function toggleBrowserNotif(){
    const t=document.getElementById('toggleBrowserNotif');t.classList.toggle('on');
    if(t.classList.contains('on')&&'Notification' in window)Notification.requestPermission();
}
function toggleAutoRefresh(){
    autoRefreshEnabled=!autoRefreshEnabled;
    document.getElementById('toggleAutoRefresh').classList.toggle('on',autoRefreshEnabled);
    if(autoRefreshEnabled){refreshInterval=setInterval(loadData,3000);showToast('','Auto-refresh wczony')}
    else{clearInterval(refreshInterval);showToast('','Auto-refresh wyczony')}
}
function toggleAnimations(){document.getElementById('toggleAnimations').classList.toggle('on')}
function toggleCompact(){document.getElementById('toggleCompact').classList.toggle('on')}

// ====== THEMES ======
function setTheme(id){
    document.documentElement.setAttribute('data-theme',id==='default'?'':id);
    localStorage.setItem('mc_theme',id);
    renderSettings();
    showToast('','Zmieniono motyw');
}
function renderSettings(){
    const current=localStorage.getItem('mc_theme')||'default';
    document.getElementById('themeGrid').innerHTML=themes.map(t=>`<div class="theme-option ${t.id===current?'active':''}" onclick="setTheme('${t.id}')"><div class="theme-preview" style="background:linear-gradient(135deg,${t.colors[0]},${t.colors[1]},${t.colors[2]})"></div><div class="theme-name">${t.name}</div></div>`).join('');
}

// ====== LOAD DATA ======
async function loadData(){
    try{
        const r=await fetch(`${SU}/rest/v1/chat_messages?order=timestamp.desc&limit=1000`,{headers:{'apikey':SK,'Authorization':'Bearer '+SK}});
        if(!r.ok)throw new Error(r.status);
        allMessages=await r.json();
        document.getElementById('statusBadge').className='status-badge online';
        document.getElementById('statusText').textContent='Poczono';

        players={};
        const serverSet=new Set();
        allMessages.forEach(m=>{
            if(!players[m.player_name])players[m.player_name]={uuid:m.player_uuid,count:0,chatCount:0,cmdCount:0,lastSeen:null,servers:new Set()};
            players[m.player_name].count++;
            if(m.message_type==='chat')players[m.player_name].chatCount++;else players[m.player_name].cmdCount++;
            if(!players[m.player_name].lastSeen||new Date(m.timestamp)>new Date(players[m.player_name].lastSeen))players[m.player_name].lastSeen=m.timestamp;
            if(m.server_ip){players[m.player_name].servers.add(m.server_ip);serverSet.add(m.server_ip)}
        });

        // New messages
        if(!isFirstLoad&&allMessages.length>previousCount){
            const nc=allMessages.length-previousCount;
            playNotifSound();
            showToast('',`${nc} nowych wiadomoci`);
            addNotification('',`Nowe wiadomoci`,`Otrzymano ${nc} nowych wiadomoci`);
            if(document.getElementById('toggleBrowserNotif')?.classList.contains('on')&&Notification.permission==='granted'){
                new Notification('MC Chat Logger',{body:`${nc} nowych wiadomoci`,icon:''});
            }
        }
        previousCount=allMessages.length;isFirstLoad=false;

        // Store server count
        window._serverCount=serverSet.size;

        updateStats();renderDashboard();renderChatSidebar();renderMessages();updateNavCounts();
        if(currentTab==='players')renderPlayersPage();
        if(currentTab==='stats')renderStats();
        if(currentTab==='timeline')renderTimeline();
    }catch(e){
        document.getElementById('statusBadge').className='status-badge offline';
        document.getElementById('statusText').textContent='Bd';
        console.error(e);
    }
}

// ====== UPDATE STATS ======
function updateStats(){
    const total=allMessages.length,ch=allMessages.filter(m=>m.message_type==='chat').length,cm=allMessages.filter(m=>m.message_type==='command').length,pl=Object.keys(players).length;
    const td=new Date().toISOString().split('T')[0],tc=allMessages.filter(m=>m.timestamp&&m.timestamp.startsWith(td)).length;
    animNum(document.getElementById('sTotal'),total);
    animNum(document.getElementById('sChat'),ch);
    animNum(document.getElementById('sCmd'),cm);
    animNum(document.getElementById('sPlayers'),pl);
    animNum(document.getElementById('sToday'),tc);
    animNum(document.getElementById('sServers'),window._serverCount||0);
    document.getElementById('sTotalSub').textContent=`+${tc} dzi`;
}
function updateNavCounts(){
    document.getElementById('navChatCount').textContent=allMessages.length;
    document.getElementById('navPlayersCount').textContent=Object.keys(players).length;
}

// ====== DASHBOARD ======
function renderDashboard(){
    const recent=allMessages.slice(0,10);
    const c=document.getElementById('recentMessages');
    if(!recent.length){c.innerHTML='<div class="empty-state" style="height:200px"><div class="empty-icon"></div><div class="empty-title">Brak wiadomoci</div></div>';return}
    c.innerHTML=recent.map(m=>{const d=new Date(m.timestamp);const ic=m.message_type==='command';return`<div class="recent-msg" onclick="openProfile('${esc(m.player_name)}')"><img src="https://mc-heads.net/avatar/${esc(m.player_name)}/34" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/34'"><div class="recent-msg-content"><div class="recent-msg-header"><span class="recent-msg-name">${esc(m.player_name)}</span><span class="recent-msg-badge ${m.message_type}">${ic?' CMD':' CHAT'}</span></div><div class="recent-msg-text${ic?' cmd':''}">${esc(m.message)}</div><div class="recent-msg-time">${timeAgo(d)}</div></div></div>`}).join('');

    const sorted=Object.entries(players).sort((a,b)=>b[1].count-a[1].count).slice(0,7);
    const maxC=sorted.length?sorted[0][1].count:1;
    document.getElementById('topPlayers').innerHTML=sorted.map(([n,d],i)=>{const rc=i===0?'r1':i===1?'r2':i===2?'r3':'rn';const p=(d.count/maxC*100).toFixed(0);return`<div class="top-player" onclick="openProfile('${esc(n)}')"><div class="top-rank ${rc}">${i+1}</div><img src="https://mc-heads.net/avatar/${esc(n)}/32" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/32'"><div class="top-player-info"><div class="top-player-name">${esc(n)}</div><div class="top-player-count">${d.count} wiad.</div></div><div class="top-player-bar"><div class="top-player-bar-fill" style="width:${p}%"></div></div></div>`}).join('');

    renderActivityChart();
}
function renderActivityChart(){
    const ch=document.getElementById('activityChart');const days=[];
    for(let i=6;i>=0;i--){const d=new Date();d.setDate(d.getDate()-i);const ds=d.toISOString().split('T')[0];const cnt=allMessages.filter(m=>m.timestamp&&m.timestamp.startsWith(ds)).length;days.push({date:d,count:cnt})}
    const max=Math.max(...days.map(d=>d.count),1);
    ch.innerHTML=days.map(d=>{const h=(d.count/max*100).toFixed(0);const lb=d.date.toLocaleDateString('pl-PL',{weekday:'short'});return`<div class="chart-bar-wrapper"><div class="chart-bar" style="height:${Math.max(h,4)}%"><div class="chart-bar-tooltip">${d.count}</div></div><div class="chart-bar-label">${lb}</div></div>`}).join('');
}

// ====== CHAT SIDEBAR ======
function renderChatSidebar(){
    const sorted=Object.entries(players).sort((a,b)=>b[1].count-a[1].count);
    const sv=(document.getElementById('playerSearchInput')?.value||'').toLowerCase();
    const filtered=sv?sorted.filter(([n])=>n.toLowerCase().includes(sv)):sorted;
    document.getElementById('chatPlayerCnt').textContent=Object.keys(players).length;
    let html=`<div class="pi ${selectedPlayer===null?'active':''}" onclick="selectPlayer(null)"><div style="width:34px;height:34px;border-radius:7px;background:linear-gradient(135deg,var(--accent),var(--blue));display:flex;align-items:center;justify-content:center;font-size:16px"></div><div class="pi-info"><div class="pi-name">Wszyscy</div><div class="pi-meta">${allMessages.length} wiad.</div></div></div>`;
    html+=filtered.map(([n,d])=>`<div class="pi ${selectedPlayer===n?'active':''}" onclick="selectPlayer('${esc(n)}')"><img src="https://mc-heads.net/avatar/${esc(n)}/34" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/34'"><div class="pi-info"><div class="pi-name">${esc(n)}</div><div class="pi-meta">${d.count} wiad.  ${timeAgo(new Date(d.lastSeen))}</div></div></div>`).join('');
    document.getElementById('playerList').innerHTML=html;
}
function selectPlayer(n){selectedPlayer=n;renderChatSidebar();renderMessages()}
function setFilter(f){currentFilter=f;document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.dataset.filter===f));renderMessages()}
function filterMessages(){searchQuery=document.getElementById('chatSearchInput').value;renderMessages()}

// ====== MESSAGES ======
function renderMessages(){
    let f=[...allMessages];
    if(selectedPlayer)f=f.filter(m=>m.player_name===selectedPlayer);
    if(currentFilter!=='all')f=f.filter(m=>m.message_type===currentFilter);
    if(searchQuery){const q=searchQuery.toLowerCase();f=f.filter(m=>m.message.toLowerCase().includes(q)||m.player_name.toLowerCase().includes(q))}
    const c=document.getElementById('messagesContainer');
    if(!f.length){c.innerHTML=`<div class="empty-state"><div class="empty-icon"></div><div class="empty-title">Brak wiadomoci</div><div class="empty-desc">${selectedPlayer?selectedPlayer+' - brak':'Czekam...'}</div></div>`;return}
    let h='',ld='';
    f.forEach((m,idx)=>{
        const d=new Date(m.timestamp),ds=d.toLocaleDateString('pl-PL',{weekday:'long',day:'numeric',month:'long',year:'numeric'}),ts=d.toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
        const ic=m.message_type==='command';
        if(ds!==ld){h+=`<div class="date-divider">${ds}</div>`;ld=ds}
        h+=`<div class="msg-row"><img src="https://mc-heads.net/avatar/${esc(m.player_name)}/32" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/32'" onclick="openProfile('${esc(m.player_name)}')"><div class="msg-content"><div class="msg-header"><span class="msg-player" onclick="openProfile('${esc(m.player_name)}')">${esc(m.player_name)}</span><span class="msg-type ${m.message_type}">${ic?' CMD':' CHAT'}</span>${m.server_ip?`<span class="msg-srv">${esc(m.server_ip)}</span>`:''}</div><div class="msg-text${ic?' cmd':''}">${esc(m.message)}</div></div><div class="msg-time">${ts}</div></div>`;
    });
    c.innerHTML=h;
}

// ====== PLAYERS PAGE ======
function renderPlayersPage(){
    const sv=(document.getElementById('playersPageSearch')?.value||'').toLowerCase();
    const sorted=Object.entries(players).sort((a,b)=>b[1].count-a[1].count);
    const filtered=sv?sorted.filter(([n])=>n.toLowerCase().includes(sv)):sorted;
    document.getElementById('playersGrid').innerHTML=filtered.map(([n,d])=>`<div class="player-card" onclick="openProfile('${esc(n)}')"><div class="player-card-top"><img class="player-card-avatar" src="https://mc-heads.net/avatar/${esc(n)}/50" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/50'"><div><div class="player-card-name">${esc(n)}</div><div class="player-card-uuid">${esc(d.uuid?d.uuid.substring(0,16)+'...':'')}</div></div></div><div class="player-card-stats"><div class="pcs"><div class="pcs-val purple">${d.count}</div><div class="pcs-lbl">cznie</div></div><div class="pcs"><div class="pcs-val grn">${d.chatCount}</div><div class="pcs-lbl">Chat</div></div><div class="pcs"><div class="pcs-val rd">${d.cmdCount}</div><div class="pcs-lbl">Komendy</div></div></div></div>`).join('');
}

// ====== PROFILE MODAL ======
function openProfile(n){
    const d=players[n];if(!d)return;
    document.getElementById('modalAvatar').src=`https://mc-heads.net/avatar/${n}/80`;
    document.getElementById('modalName').textContent=n;
    document.getElementById('modalUUID').textContent=d.uuid||'UUID nieznane';
    document.getElementById('modalTotal').textContent=d.count;
    document.getElementById('modalChat').textContent=d.chatCount;
    document.getElementById('modalCmd').textContent=d.cmdCount;
    const pm=allMessages.filter(m=>m.player_name===n).slice(0,25);
    document.getElementById('modalMessages').innerHTML=`<div class="modal-section-title"> Ostatnie wiadomoci (${pm.length})</div>`+pm.map(m=>{
        const dt=new Date(m.timestamp),ts=dt.toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit'}),ds=dt.toLocaleDateString('pl-PL',{day:'numeric',month:'short'});
        const ic=m.message_type==='command';
        return`<div class="msg-row" style="margin:0 -10px"><img src="https://mc-heads.net/avatar/${esc(n)}/28" style="width:28px;height:28px" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/28'"><div class="msg-content"><div class="msg-header"><span class="msg-type ${m.message_type}">${ic?' CMD':' CHAT'}</span>${m.server_ip?`<span class="msg-srv">${esc(m.server_ip)}</span>`:''}</div><div class="msg-text${ic?' cmd':''}">${esc(m.message)}</div></div><div class="msg-time">${ds}<br>${ts}</div></div>`;
    }).join('');
    document.getElementById('profileModal').classList.add('show');document.body.style.overflow='hidden';
}
function closeProfile(){document.getElementById('profileModal').classList.remove('show');document.body.style.overflow=''}
document.getElementById('profileModal').addEventListener('click',e=>{if(e.target===document.getElementById('profileModal'))closeProfile()});
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeProfile();document.getElementById('notifPanel').classList.remove('open');document.getElementById('notifOverlay').classList.remove('show')}});

// ====== STATS PAGE ======
function renderStats(){
    const ch=allMessages.filter(m=>m.message_type==='chat').length,cm=allMessages.filter(m=>m.message_type==='command').length,total=allMessages.length||1;
    document.getElementById('typeDist').innerHTML=`<div class="type-dist"><div class="type-bar"><div class="type-bar-label"> Chat</div><div class="type-bar-track"><div class="type-bar-fill chat-fill" style="width:${(ch/total*100).toFixed(1)}%">${(ch/total*100).toFixed(1)}%</div></div><div class="type-bar-val grn">${ch}</div></div><div class="type-bar"><div class="type-bar-label"> Komendy</div><div class="type-bar-track"><div class="type-bar-fill cmd-fill" style="width:${(cm/total*100).toFixed(1)}%">${(cm/total*100).toFixed(1)}%</div></div><div class="type-bar-val rd">${cm}</div></div></div>`;

    const hours=new Array(24).fill(0);
    allMessages.forEach(m=>{if(m.timestamp)hours[new Date(m.timestamp).getHours()]++});
    const maxH=Math.max(...hours,1);
    let hm='<div class="heatmap">';hours.forEach((cnt,h)=>{const i=cnt/maxH;const bg=cnt===0?'var(--bg3)':`rgba(${Math.round(124+50*i)},${Math.round(58+80*i)},${Math.round(237*i)},${.3+i*.7})`;hm+=`<div class="hm-cell" style="background:${bg}"><div class="hm-tt">${h}:00  ${cnt}</div></div>`});
    hm+='</div><div class="hm-labels">';for(let i=0;i<24;i++)hm+=`<span>${i}</span>`;hm+='</div>';
    document.getElementById('hourlyHM').innerHTML=hm;

    const servers={};allMessages.forEach(m=>{const s=m.server_ip||'Nieznany';servers[s]=(servers[s]||0)+1});
    const ss=Object.entries(servers).sort((a,b)=>b[1]-a[1]);
    document.getElementById('serverStats').innerHTML=`<div class="server-list">${ss.map(([s,c])=>`<div class="server-item"><div class="server-icon"></div><div class="server-info"><div class="server-name">${esc(s)}</div><div class="server-count">${c} wiad.</div></div></div>`).join('')}</div>`;

    const words={};const stop=new Set(['i','w','na','do','z','o','a','to','je','co','jak','nie','tak','ale','za','po','si','od','ju','jest','e','te','ty','ja','my','the','is','are','and','or','']);
    allMessages.forEach(m=>{if(m.message_type==='chat')m.message.toLowerCase().split(/\s+/).forEach(w=>{w=w.replace(/[^a-z0-9]/gi,'');if(w.length>2&&!stop.has(w)&&!w.startsWith('/'))words[w]=(words[w]||0)+1})});
    const sw=Object.entries(words).sort((a,b)=>b[1]-a[1]).slice(0,25);const mw=sw.length?sw[0][1]:1;
    const colors=['var(--accent2)','var(--green)','var(--blue2)','var(--yellow)','var(--pink)','var(--cyan)','var(--orange)','var(--red2)'];
    document.getElementById('wordCloud').innerHTML=`<div class="word-cloud">${sw.map(([w,c],i)=>{const sz=10+(c/mw)*16;return`<span class="word-tag" style="font-size:${sz}px;color:${colors[i%colors.length]};opacity:${.5+(c/mw)*.5}">${esc(w)} <sup style="font-size:8px;opacity:.5">${c}</sup></span>`}).join('')}</div>`;
}

// ====== TIMELINE ======
function renderTimeline(){
    const msgs=allMessages.slice(0,40);
    const c=document.getElementById('timelineContent');
    if(!msgs.length){c.innerHTML='<div class="empty-state"><div class="empty-icon"></div><div class="empty-title">Brak</div></div>';return}
    c.innerHTML=msgs.map(m=>{
        const d=new Date(m.timestamp),ts=d.toLocaleTimeString('pl-PL',{hour:'2-digit',minute:'2-digit'}),ds=d.toLocaleDateString('pl-PL',{day:'numeric',month:'short'});
        const ic=m.message_type==='command';
        return`<div class="tl-item"><div class="tl-dot ${m.message_type}"></div><div class="tl-card"><div class="tl-card-header"><img src="https://mc-heads.net/avatar/${esc(m.player_name)}/28" style="width:28px;height:28px;border-radius:6px;image-rendering:pixelated" onerror="this.src='https://mc-heads.net/avatar/MHF_Steve/28'"><span class="tl-card-name">${esc(m.player_name)}</span><span class="tl-card-time">${ds} ${ts}</span></div><div class="tl-card-msg${ic?' cmd':''}">${esc(m.message)}</div></div></div>`;
    }).join('');
}

// ====== EXPORT ======
function exportData(){
    const d=allMessages.map(m=>`[${m.timestamp}] <${m.player_name}> (${m.message_type}) ${m.message}`).join('\n');
    dl(d,'mc-chat-log.txt','text/plain');showToast('','Eksportowano TXT');
}
function exportJSON(){dl(JSON.stringify(allMessages,null,2),'mc-chat-log.json','application/json');showToast('','Eksportowano JSON')}
function exportCSV(){
    const h='timestamp,player,type,message,server\n';
    const r=allMessages.map(m=>`"${m.timestamp}","${m.player_name}","${m.message_type}","${m.message.replace(/"/g,'""')}","${m.server_ip||''}"`).join('\n');
    dl(h+r,'mc-chat-log.csv','text/csv');showToast('','Eksportowano CSV');
}
function dl(data,name,type){const b=new Blob([data],{type});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download=name;a.click();URL.revokeObjectURL(u)}

// ====== PARTICLES ======
function createParticles(){const bg=document.querySelector('.bg-effects');for(let i=0;i<15;i++){const p=document.createElement('div');p.className='particle';p.style.left=Math.random()*100+'%';p.style.top=Math.random()*100+'%';p.style.animationDelay=Math.random()*4+'s';p.style.animationDuration=(3+Math.random()*3)+'s';bg.appendChild(p)}}

// ====== SCROLL ======
window.addEventListener('scroll',()=>{document.getElementById('header')?.classList.toggle('scrolled',window.scrollY>10)});

// ====== INIT ======
function startApp(){
    createParticles();updateGreeting();updateClock();renderSettings();
    setInterval(updateClock,1000);
    loadData();
    refreshInterval=setInterval(loadData,3000);

    // load saved theme
    const st=localStorage.getItem('mc_theme');
    if(st&&st!=='default')document.documentElement.setAttribute('data-theme',st);
}

createLoginParticles();

// Auto-start if already logged
if(sessionStorage.getItem('mc_logged')==='1'){startApp()}
</script>
</body>
</html>